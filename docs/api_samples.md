# –ü—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è Travel Insurance

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ API –¥–ª—è –º–æ–¥—É–ª—è Travel Insurance.

## –ë–∞–∑–æ–≤—ã–π URL

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://localhost:8080`

## Endpoints

### 1. POST /travel/purpose

–°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "purpose_id": 3,
  "destinations": ["TR"]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "session_id": "1efec430-6f45-45aa-951b-a3749e1a85d8",
  "data": {
    "purpose_id": 3,
    "destinations": ["TR"]
  }
}
```

### 2. POST /travel/details

–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–µ—Ç–∞–ª–µ–π –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "session_id": "1efec430-6f45-45aa-951b-a3749e1a85d8",
  "start_date": "12-12-2025",
  "end_date": "29-12-2025",
  "travelers_birthdates": ["20-02-2002"],
  "annual_policy": false,
  "covid_protection": false
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–î–µ—Ç–∞–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"
}
```

### 3. POST /travel/calculate

–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "session_id": "1efec430-6f45-45aa-951b-a3749e1a85d8",
  "accident": false,
  "luggage": false,
  "cancel_travel": false,
  "person_respon": false,
  "delay_travel": false
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "premium": 722000.0,
  "summa_all": 722000.0,
  "data": {
    "calculated_at": "2025-01-01T12:00:00Z"
  }
}
```

### 4. POST /travel/save

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–∏—Å–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "session_id": "9a84f2fd-cd2e-4eaf-bfe7-398a8ff04454",
  "provider": "apex",
  "summa_all": 722000,
  "program_id": "3",
  "sugurtalovchi": {
    "type": 0,
    "passportSeries": "AA",
    "passportNumber": "1234567",
    "birthday": "09-05-1971",
    "phone": "940000000",
    "pinfl": "01234567891011",
    "last_name": "Yusupov",
    "first_name": "Akmal",
    "middle_name": "Yusupovich"
  },
  "travelers": [
    {
      "passportSeries": "AA",
      "passportNumber": "1234567",
      "birthday": "20-02-2002",
      "pinfl": "01234567891011",
      "last_name": "Yusupov",
      "first_name": "Akmal"
    }
  ]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "policy_id": "pol-12345",
  "policy_number": "POL-2025-001",
  "data": {
    "saved_at": "2025-01-01T12:00:00Z"
  }
}
```

### 5. POST /travel/check

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Å—Å–∏–∏/–ø–æ–ª–∏—Å–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "session_id": "52bb6199-6f5d-4db6-9651-31d84072502c"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "saved",
  "policy_id": "pol-12345",
  "policy_number": "POL-2025-001",
  "data": {
    "checked_at": "2025-01-01T12:00:00Z"
  }
}
```

### 6. GET /travel/country

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω.

**–ó–∞–ø—Ä–æ—Å:**
```
GET /travel/country
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "code": "TR",
    "name": "–¢—É—Ä—Ü–∏—è",
    "flag": "üáπüá∑"
  },
  {
    "code": "AL",
    "name": "–ê–ª–±–∞–Ω–∏—è",
    "flag": "üá¶üá±"
  }
]
```

### 7. POST /travel/tarifs

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ –ø–æ —Å—Ç—Ä–∞–Ω–µ.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "country": "AL"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "tarifs": [
    {
      "country": "AL",
      "daily_rate": 5000,
      "currency": "UZS"
    }
  ],
  "data": {
    "updated_at": "2025-01-01T12:00:00Z"
  }
}
```

## –§–æ—Ä–º–∞—Ç –¥–∞—Ç

–í—Å–µ –¥–∞—Ç—ã –≤ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–æ—Ä–º–∞—Ç **DD-MM-YYYY** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `12-12-2025`).

## –í–∞–ª–∏–¥–∞—Ü–∏—è

### –°–µ—Ä–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞
- –§–æ—Ä–º–∞—Ç: 2 –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã (A-Z)
- –ü—Ä–∏–º–µ—Ä: `AA`, `AB`, `CD`

### –ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞
- –§–æ—Ä–º–∞—Ç: 7 —Ü–∏—Ñ—Ä
- –ü—Ä–∏–º–µ—Ä: `1234567`

### –ü–ò–ù–§–õ
- –§–æ—Ä–º–∞—Ç: 14 —Ü–∏—Ñ—Ä
- –ü—Ä–∏–º–µ—Ä: `01234567891011`

### –¢–µ–ª–µ—Ñ–æ–Ω
- –§–æ—Ä–º–∞—Ç: 9-15 —Ü–∏—Ñ—Ä, –º–æ–∂–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å +
- –ü—Ä–∏–º–µ—Ä—ã: `940000000`, `+998940000000`

### –î–∞—Ç–∞
- –§–æ—Ä–º–∞—Ç: DD-MM-YYYY
- –ü—Ä–∏–º–µ—Ä: `12-12-2025`
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞: `01-01-1900`

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞)
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫

**–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
```json
{
  "error": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–µ—Ä–∏–∏ –ø–∞—Å–ø–æ—Ä—Ç–∞",
  "code": 400
}
```

**–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:**
```json
{
  "error": "–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É",
  "code": 0
}
```

