# üìä –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ú–û–î–£–õ–Ø KASKO FUTURES

## üéØ –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

**–ü—Ä–æ–µ–∫—Ç:** KLiRO (Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)  
**–ú–æ–¥—É–ª—å:** Kasko Futures (–ö–ê–°–ö–û —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ)  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Clean Architecture + BLoC Pattern  
**–Ø–∑—ã–∫:** Dart/Flutter

---

## üöÄ –¢–û–ß–ö–ê –í–•–û–î–ê –ò –ü–ï–†–í–ê–Ø –°–¢–†–ê–ù–ò–¶–ê

### –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

**–§–∞–π–ª:** `lib/main.dart`

```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await EasyLocalization.ensureInitialized();
  runApp(EasyLocalization(...child: const App()));
}
```

### –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:

**–§–∞–π–ª:** `lib/core/navigation/app_router.dart`

```56:56:lib/core/navigation/app_router.dart
AutoRoute(page: SplashRoute.page, initial: true),
```

**–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** `SplashPage` ‚Üí `OnboardingPage` ‚Üí `HomePage`

### –ü—É—Ç—å –∫ Kasko Futures:

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`HomePage`)
   ‚Üì
2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ª—É–≥** (`ServicesPage`) ‚Üí –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫ "–°—Ç—Ä–∞—Ö–æ–≤—ã–µ —É—Å–ª—É–≥–∏"
   ‚Üì
3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —É—Å–ª—É–≥** (`InsuranceServicesPage`)
   - –§–∞–π–ª: `lib/features/insurance/presentation/pages/insurance_services_page.dart`
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "KASKO" –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥:
   ```dart
   context.router.push(const KaskoModuleRoute());
   ```
   ‚Üì
4. **Kasko Module** (`KaskoModule`) - **–≠–¢–û –ü–ï–†–í–ê–Ø –°–¢–†–ê–ù–ò–¶–ê KASKO FUTURES**
   - –§–∞–π–ª: `lib/features/kasko/kasko_module.dart`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç: `KaskoFormSelectionPage`

---

## üì± –°–¢–†–ê–ù–ò–¶–´ KASKO FUTURES (–ü–û –ü–û–†–Ø–î–ö–£)

### 1. **KaskoFormSelectionPage** (–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_form_selection_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –í—ã–±–æ—Ä –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (Brand)
- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (Model)
- –í—ã–±–æ—Ä –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏/–ø–æ–∑–∏—Ü–∏–∏ (Position)
- –í—ã–±–æ—Ä –≥–æ–¥–∞ –≤—ã–ø—É—Å–∫–∞ (Year)

**API –≤—ã–∑–æ–≤—ã:**

- `FetchCarsMinimal` - –∑–∞–≥—Ä—É–∑–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö (brand, model, position)
- `CalculateCarPrice` - —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—è –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**

- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `KaskoTariffPage`

---

### 2. **KaskoTariffPage** (–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_tariff_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è
- –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ (Basic, Standard, Premium –∏ —Ç.–¥.)
- –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–ª–∏—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞

**API –≤—ã–∑–æ–≤—ã:**

- `FetchRates` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è
- `CalculatePolicy` - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–ª–∏—Å–∞

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**

- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–≤–æ–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

---

### 3. **KaskoDocumentDataPage** (–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_document_data_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–≥–æ—Å. –Ω–æ–º–µ—Ä)
- –í–≤–æ–¥ VIN –Ω–æ–º–µ—Ä–∞
- –í–≤–æ–¥ —Å–µ—Ä–∏–∏ –∏ –Ω–æ–º–µ—Ä–∞ –ø–∞—Å–ø–æ—Ä—Ç–∞

---

### 4. **KaskoPersonalDataPage** (–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_personal_data_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –í–≤–æ–¥ –§–ò–û –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –í–≤–æ–¥ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è
- –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –í–≤–æ–¥ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### 5. **KaskoOrderDetailsPage** (–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_order_details_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**API –≤—ã–∑–æ–≤—ã:**

- `SaveOrder` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

---

### 6. **KaskoPaymentTypePage** (–í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_payment_type_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã (Payme –∏–ª–∏ Click)
- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É

**API –≤—ã–∑–æ–≤—ã:**

- `CreatePaymentLink` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É

---

### 7. **KaskoPaymentPage** (–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_payment_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã

**API –≤—ã–∑–æ–≤—ã:**

- `CheckPayment` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã

---

### 8. **KaskoSuccessPage** (–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞)

**–§–∞–π–ª:** `lib/features/kasko/presentation/pages/kasko_success_page.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–ª–∏—Å–∞

---

## üîå API ENDPOINTS

**–ë–∞–∑–æ–≤—ã–π URL:** `https://api.kliro.uz`

**–§–∞–π–ª —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏:** `lib/core/constants/constants.dart`

### –í—Å–µ API endpoints –¥–ª—è Kasko:

1. **GET `/insurance/kasko/cars`**

   - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.getCars()`

2. **GET `/insurance/kasko/cars/minimal`**

   - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (brand, model, position)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.getCarsMinimal()`
   - Fallback: –µ—Å–ª–∏ 404, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π endpoint

3. **GET `/insurance/kasko/rates`**

   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.getRates()`
   - –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: `{result: true, tarif: [{id, name, percent}, ...]}`

4. **POST `/insurance/kasko/car-price`**

   - –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.calculateCarPrice()`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `carId` (car_position_id), `tarifId`, `year`
   - –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: `{price: 280000000}`

5. **POST `/insurance/kasko/calculate`**

   - –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–ª–∏—Å–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.calculatePolicy()`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `carId`, `year`, `price`, `beginDate`, `endDate`, `driverCount`, `franchise`

6. **POST `/insurance/kasko/save`**

   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.saveOrder()`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ (carId, year, price, dates, driverCount, franchise, premium, ownerName, ownerPhone, ownerPassport, carNumber, vin)

7. **POST `/insurance/kasko/payment-link`**

   - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.getPaymentLink()`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `orderId`, `amount`, `returnUrl`, `callbackUrl`

8. **POST `/insurance/kasko/check-payment`**

   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.checkPaymentStatus()`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `orderId`, `transactionId`

9. **POST `/insurance/kasko/image-upload`**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: `KaskoRemoteDataSource.uploadImage()`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `file` (MultipartFile), `order_id`, `image_type`

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò –°–¢–†–£–ö–¢–£–†–ê

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫:

```
lib/features/kasko/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ datasources/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_remote_data_source.dart  # API –≤—ã–∑–æ–≤—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kasko_local_data_source.dart   # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îú‚îÄ‚îÄ models/                            # DTO –º–æ–¥–µ–ª–∏ (–¥–ª—è API)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ car_model.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rate_model.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculate_request.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculate_response.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (–¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏)
‚îÇ   ‚îî‚îÄ‚îÄ repositories/
‚îÇ       ‚îî‚îÄ‚îÄ kasko_repository_impl.dart     # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ entities/                          # –ë–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ car_entity.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rate_entity.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculate_entity.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (–¥—Ä—É–≥–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏)
‚îÇ   ‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kasko_repository.dart          # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ usecases/                          # Use cases (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ       ‚îú‚îÄ‚îÄ get_cars.dart
‚îÇ       ‚îú‚îÄ‚îÄ get_cars_minimal.dart
‚îÇ       ‚îú‚îÄ‚îÄ get_rates.dart
‚îÇ       ‚îú‚îÄ‚îÄ calculate_car_price.dart
‚îÇ       ‚îú‚îÄ‚îÄ calculate_policy.dart
‚îÇ       ‚îú‚îÄ‚îÄ save_order.dart
‚îÇ       ‚îú‚îÄ‚îÄ get_payment_link.dart
‚îÇ       ‚îú‚îÄ‚îÄ check_payment_status.dart
‚îÇ       ‚îî‚îÄ‚îÄ upload_image.dart
‚îú‚îÄ‚îÄ presentation/
‚îÇ   ‚îú‚îÄ‚îÄ bloc/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_bloc.dart                # BLoC –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_event.dart               # –°–æ–±—ã—Ç–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kasko_state.dart               # –°–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ pages/                             # UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_form_selection_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_tariff_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_document_data_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_personal_data_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_order_details_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_payment_type_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_payment_page.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kasko_success_page.dart
‚îÇ   ‚îú‚îÄ‚îÄ widgets/                           # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–∏–¥–∂–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_car_plate_input.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_passport_input.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kasko_tech_passport_input.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ providers/
‚îÇ       ‚îî‚îÄ‚îÄ kasko_provider.dart            # Provider (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ BLoC)
‚îú‚îÄ‚îÄ utils/                                  # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ car_plate_formatter.dart
‚îÇ   ‚îî‚îÄ‚îÄ upper_case_text_formatter.dart
‚îî‚îÄ‚îÄ kasko_module.dart                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –º–æ–¥—É–ª—è
```

---

## üîÑ –ü–û–¢–û–ö –î–ê–ù–ù–´–• (DATA FLOW)

### Clean Architecture —Å–ª–æ–∏:

1. **Presentation Layer** (UI)

   - `KaskoBloc` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
   - –°—Ç—Ä–∞–Ω–∏—Ü—ã (Pages) - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –í–∏–¥–∂–µ—Ç—ã (Widgets) - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

2. **Domain Layer** (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)

   - Entities - –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏
   - Use Cases - –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–∏
   - Repository Interface - –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

3. **Data Layer** (–î–∞–Ω–Ω—ã–µ)
   - Remote Data Source - API –≤—ã–∑–æ–≤—ã
   - Local Data Source - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
   - Repository Implementation - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   - Models - DTO –¥–ª—è API

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:

```
UI (Page)
  ‚Üí BLoC Event
    ‚Üí Use Case
      ‚Üí Repository
        ‚Üí Data Source (Remote/Local)
          ‚Üí API/Storage
            ‚Üì
          Response
            ‚Üì
        Data Source ‚Üí Model (DTO)
            ‚Üì
      Repository ‚Üí Entity
            ‚Üì
    Use Case ‚Üí Entity
            ‚Üì
  BLoC State
            ‚Üì
UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
```

---

## üì¶ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –ò –ò–°–ü–û–õ–¨–ó–£–ï–ú–´–ï –ü–ê–ö–ï–¢–´

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:

1. **auto_route** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
2. **flutter_bloc** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (BLoC pattern)
3. **dio** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
4. **provider** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
5. **equatable** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
6. **freezed** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è immutable –∫–ª–∞—Å—Å–æ–≤
7. **json_annotation** - —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON
8. **flutter_screenutil** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã
9. **easy_localization** - –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (uz, ru, en)
10. **intl** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ —á–∏—Å–µ–ª

---

## üé® UI/UX –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### –¢–µ–º—ã:

- –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ (Light Theme)
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (Dark Theme)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `ThemeController`

### –¶–≤–µ—Ç–∞:

- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç: `#0085FF` (—Å–∏–Ω–∏–π)
- –§–æ–Ω: `#F4F6F8` (—Å–≤–µ—Ç–ª—ã–π) / `#121212` (—Ç–µ–º–Ω—ã–π)
- –ö–∞—Ä—Ç–æ—á–∫–∏: `#FFFFFF` (—Å–≤–µ—Ç–ª—ã–π) / `#1E1E1E` (—Ç–µ–º–Ω—ã–π)

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `flutter_screenutil` –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–æ–≤
- Design size: `390x844` (iPhone 12/13 —Å—Ç–∞–Ω–¥–∞—Ä—Ç)

---

## ‚ö° –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

1. **Isolate –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON**

   - –ë–æ–ª—å—à–∏–µ JSON –æ—Ç–≤–µ—Ç—ã –ø–∞—Ä—Å—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º isolate
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç main thread
   - –§–∞–π–ª: `kasko_remote_data_source.dart` (—Ñ—É–Ω–∫—Ü–∏–∏ `_parseCarsDataFromJson`, `_parseRatesDataFromJson`)

2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**

   - `getCarsMinimal()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è (brand, model, position)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**

   - –î–∞–Ω–Ω—ã–µ –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ BLoC
   - –ò–∑–±–µ–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤

4. **Debounced setState**

   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è debounce –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π UI
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏–∑–ª–∏—à–Ω–∏–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏

5. **Lazy loading**
   - –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã
   - Rates –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–∞—Ä–∏—Ñ–æ–≤

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

1. **–¢–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π:**

   - `ApiException` - –æ—à–∏–±–∫–∏ API (400, 404 –∏ —Ç.–¥.)
   - `NetworkException` - —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
   - `ServerException` - –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ (500+)
   - `UnauthorizedException` - –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401)

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ UI
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ BLoC (`ValidatePersonalData` event)

---

## üìù –°–û–ë–´–¢–ò–Ø BLoC (Events)

**–§–∞–π–ª:** `lib/features/kasko/presentation/bloc/kasko_event.dart`

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

1. `FetchCars` - –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
2. `FetchCarsMinimal` - –∑–∞–≥—Ä—É–∑–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. `FetchRates` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤
4. `SelectCarBrand` - –≤—ã–±–æ—Ä –º–∞—Ä–∫–∏
5. `SelectCarModel` - –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
6. `SelectCarPosition` - –≤—ã–±–æ—Ä –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏
7. `SelectYear` - –≤—ã–±–æ—Ä –≥–æ–¥–∞
8. `SelectRate` - –≤—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞
9. `CalculateCarPrice` - —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—è
10. `CalculatePolicy` - —Ä–∞—Å—á–µ—Ç –ø–æ–ª–∏—Å–∞
11. `SaveOrder` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
12. `CreatePaymentLink` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É
13. `CheckPayment` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã
14. `UploadImage` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
15. `ValidatePersonalData` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
16. `SavePersonalData` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
17. `SavePaymentMethod` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã

---

## üìä –°–û–°–¢–û–Ø–ù–ò–Ø BLoC (States)

**–§–∞–π–ª:** `lib/features/kasko/presentation/bloc/kasko_state.dart`

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

1. `KaskoInitial` - –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
2. `KaskoLoading` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
3. `KaskoCarsLoaded` - –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
4. `KaskoRatesLoaded` - —Ç–∞—Ä–∏—Ñ—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
5. `KaskoCarPriceCalculated` - —Ü–µ–Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞
6. `KaskoPolicyCalculated` - –ø–æ–ª–∏—Å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω
7. `KaskoSavingOrder` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
8. `KaskoOrderSaved` - –∑–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
9. `KaskoPaymentLinkCreated` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∞
10. `KaskoPaymentChecked` - —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω
11. `KaskoImageUploaded` - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
12. `KaskoError` - –æ—à–∏–±–∫–∞
13. `KaskoValidationError` - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
14. `KaskoValidationSuccess` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞

---

## üó∫Ô∏è –ù–ê–í–ò–ì–ê–¶–ò–Ø

### –ú–∞—Ä—à—Ä—É—Ç—ã (Routes):

**–§–∞–π–ª:** `lib/core/navigation/app_router.dart`

```dart
AutoRoute(page: KaskoModuleRoute.page),           // –ú–æ–¥—É–ª—å Kasko
AutoRoute(page: KaskoFormSelectionRoute.page),    // –í—ã–±–æ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è
AutoRoute(page: KaskoTariffRoute.page),          // –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞
AutoRoute(page: KaskoCarsListRoute.page),        // –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
AutoRoute(page: KaskoPaymentRoute.page),         // –û–ø–ª–∞—Ç–∞
AutoRoute(page: KaskoDocumentDataRoute.page),    // –î–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
AutoRoute(page: KaskoPersonalDataRoute.page),    // –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
AutoRoute(page: KaskoOrderDetailsRoute.page),     // –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
AutoRoute(page: KaskoPaymentTypeRoute.page),      // –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
AutoRoute(page: KaskoSuccessRoute.page),          // –£—Å–ø–µ—Ö
```

### –ü–æ—Ä—è–¥–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:

```
InsuranceServicesPage
  ‚Üì (–Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ KASKO)
KaskoModule
  ‚Üì (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç)
KaskoFormSelectionPage
  ‚Üì (–ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∞–≤—Ç–æ –∏ –≥–æ–¥–∞)
KaskoTariffPage
  ‚Üì (–ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞)
KaskoDocumentDataPage
  ‚Üì
KaskoPersonalDataPage
  ‚Üì
KaskoOrderDetailsPage
  ‚Üì
KaskoPaymentTypePage
  ‚Üì
KaskoPaymentPage
  ‚Üì
KaskoSuccessPage
```

---

## üîß USE CASES (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)

**–ü–∞–ø–∫–∞:** `lib/features/kasko/domain/usecases/`

### –í—Å–µ Use Cases:

1. **GetCars** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
2. **GetCarsMinimal** - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **GetRates** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤
4. **CalculateCarPrice** - —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—è
5. **CalculatePolicy** - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–ª–∏—Å–∞
6. **SaveOrder** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
7. **GetPaymentLink** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É
8. **CheckPaymentStatus** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã
9. **UploadImage** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üìã –ú–û–î–ï–õ–ò –î–ê–ù–ù–´–•

### Entity (Domain Layer):

- `CarEntity` - –∞–≤—Ç–æ–º–æ–±–∏–ª—å
- `RateEntity` - —Ç–∞—Ä–∏—Ñ
- `CarPriceEntity` - —Ü–µ–Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- `CalculateEntity` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–ª–∏—Å–∞
- `SaveOrderEntity` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑
- `PaymentLinkEntity` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
- `CheckPaymentEntity` - —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã
- `ImageUploadEntity` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### Model (Data Layer - DTO):

- `CarModel` - –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è –¥–ª—è API
- `RateModel` - –º–æ–¥–µ–ª—å —Ç–∞—Ä–∏—Ñ–∞ –¥–ª—è API
- `CarPriceRequest/Response` - –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç —Ü–µ–Ω—ã
- `CalculateRequest/Response` - –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç —Ä–∞—Å—á–µ—Ç–∞
- `SaveOrderRequest/Response` - –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
- `PaymentLinkRequest/Response` - –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É
- `CheckPaymentRequest/Response` - –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø–ª–∞—Ç—ã
- `ImageUploadResponse` - –æ—Ç–≤–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üéØ –û–°–ù–û–í–ù–´–ï –§–ê–ô–õ–´ –ò –ò–• –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï

### 1. **kasko_module.dart**

- –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –º–æ–¥—É–ª—è Kasko
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Repository, Use Cases, BLoC)
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (`KaskoFormSelectionPage`)

### 2. **kasko_remote_data_source.dart**

- –í—Å–µ API –≤—ã–∑–æ–≤—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü–∞—Ä—Å–∏–Ω–≥ JSON –≤ isolate

### 3. **kasko_repository.dart** (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

- –ö–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### 4. **kasko_repository_impl.dart**

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Models –≤ Entities

### 5. **kasko_bloc.dart**

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤—Å–µ–≥–æ –º–æ–¥—É–ª—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è Use Cases

### 6. **kasko_form_selection_page.dart**

- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è
- –í—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞–≤—Ç–æ–º–æ–±–∏–ª—è

### 7. **kasko_tariff_page.dart**

- –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è
- –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–ª–∏—Å–∞

---

## üö® –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫:

1. **–°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏:**

   - Timeout
   - Connection error
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ `NetworkException`

2. **–û—à–∏–±–∫–∏ API:**

   - 400 Bad Request
   - 404 Not Found
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ `ApiException`

3. **–û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:**

   - 500 Internal Server Error
   - 502 Bad Gateway
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ `ServerException`

4. **–û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
   - 401 Unauthorized
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ `UnauthorizedException`

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫:

- –í UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `SnackBar` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏
- –°–æ—Å—Ç–æ—è–Ω–∏–µ `KaskoError` –≤ BLoC

---

## üì± –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:

- –£–∑–±–µ–∫—Å–∫–∏–π (uz)
- –£–∑–±–µ–∫—Å–∫–∏–π –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ (uz-CYR)
- –†—É—Å—Å–∫–∏–π (ru)
- –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (en)

### –§–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤:

- `assets/translations/uz.json`
- `assets/translations/uz-CYR.json`
- `assets/translations/ru.json`
- `assets/translations/en.json`

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```dart
'insurance.kasko.form_selection.title'.tr()
```

---

## üîÑ –ñ–ò–ó–ù–ï–ù–ù–´–ô –¶–ò–ö–õ –ú–û–î–£–õ–Ø

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:

1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (`main.dart`)
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `ServiceLocator` —Å Dio –∫–ª–∏–µ–Ω—Ç–æ–º
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —É—Å–ª—É–≥
4. –ù–∞–∂–∏–º–∞–µ—Ç –Ω–∞ "KASKO"
5. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `KaskoModule`
6. `KaskoModule` —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   - Repository
   - Use Cases
   - BLoC
7. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `KaskoFormSelectionPage`
8. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö (`FetchCarsMinimal`)

### –†–∞–±–æ—Ç–∞ –º–æ–¥—É–ª—è:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—å ‚Üí `SelectCarBrand`, `SelectCarModel`, `SelectCarPosition`, `SelectYear`
2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ü–µ–Ω–∞ ‚Üí `CalculateCarPrice`
3. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–∞—Ä–∏—Ñ–æ–≤ ‚Üí `KaskoTariffPage`
4. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–∞—Ä–∏—Ñ—ã ‚Üí `FetchRates`
5. –í—ã–±–∏—Ä–∞–µ—Ç—Å—è —Ç–∞—Ä–∏—Ñ ‚Üí `SelectRate`
6. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–∏—Å ‚Üí `CalculatePolicy`
7. –í–≤–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
8. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∑–∞–∫–∞–∑ ‚Üí `SaveOrder`
9. –°–æ–∑–¥–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É ‚Üí `CreatePaymentLink`
10. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã ‚Üí `CheckPayment`
11. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞ ‚Üí `KaskoSuccessPage`

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–û–î–ê

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤:

- **Pages:** 8 —Å—Ç—Ä–∞–Ω–∏—Ü
- **Widgets:** 6 –≤–∏–¥–∂–µ—Ç–æ–≤
- **Use Cases:** 9 use cases
- **Entities:** 8 entities
- **Models:** 10+ –º–æ–¥–µ–ª–µ–π
- **BLoC:** 1 bloc, 1 event —Ñ–∞–π–ª, 1 state —Ñ–∞–π–ª
- **Data Sources:** 2 (remote + local)
- **Repositories:** 1 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å + 1 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –º–æ–¥—É–ª—è:

- –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ **50+ —Ñ–∞–π–ª–æ–≤**
- –ë–æ–ª–µ–µ **5000+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ú–æ–¥—É–ª—å **Kasko Futures** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å:

- ‚úÖ –ß–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (Clean Architecture)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ BLoC
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (isolate, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ –ü–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞ 4 —è–∑—ã–∫–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã

**–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è:** `KaskoFormSelectionPage` (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `KaskoModule`)

**–û—Å–Ω–æ–≤–Ω—ã–µ API:** 9 endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, —Ç–∞—Ä–∏—Ñ–∞–º–∏, —Ä–∞—Å—á–µ—Ç–∞–º–∏ –∏ –æ–ø–ª–∞—Ç–æ–π

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –°–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏ (Presentation, Domain, Data)
